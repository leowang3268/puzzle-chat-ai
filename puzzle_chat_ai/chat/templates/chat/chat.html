{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>房間 - {{ room_name }}</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    {{ room_name|json_script:"room-name-data" }}

    <script>
        const roomNameDataElement = document.getElementById('room-name-data');
        const roomName = JSON.parse(roomNameDataElement.textContent);
    </script>
    
    <link rel="stylesheet" href="{% static 'styles.css' %}">

</head>
<body>
    <div id="container">
        <div id="left-space">
            <div id="puzzle-box">
                <h3 style="text-align: center;">題目</h3>
                <p id="puzzle-question-text">一名男子在餐廳吃完午餐，服務生拿來了帳單。他開了一張金額相符的支票，但突然將支票翻過來，在背面寫了幾句話恭喜餐廳老闆。為什麼？</p>
            </div>
            <div id="shared-container" class="chat-container shared">
                <h1 id="ai-other-title"></h1>
                <div id="shared-messages" class="messages-area">
                    <!-- <strong id="default-shared-msg" style="color:gray;">夥伴的 AI 互動將顯示於此。</strong> -->
                </div>
            </div>
        </div>

        <div id="resizer"></div>

        <div id="chatroom-container" class="chat-container user-chat">
            <h1>和夥伴的討論區</h1>
            <div id="messages" class="messages-area"></div>
            <div id="reply-container" style="display: none;"></div>
            
            <div id="suggestion-container" style="display: none;">
                <p><strong>AI 建議分享：</strong><span id="suggestion-text"></span></p>
                <div class="suggestion-actions">
                    <button id="send-suggestion-btn">傳送</button>
                    <button id="dismiss-suggestion-btn">忽略</button>
                </div>
            </div>
            <form id="form" class="chat-form">
                <textarea id="messageBox" class="chat-textarea" placeholder="輸入你的想法..."></textarea>
                <button type="submit"><i class="fas fa-paper-plane"></i></button>
            </form>
        </div>

        <div id="ai-chatroom-container" class="chat-container ai-chat">
            <h1>和 AI 裁判的對話</h1>
            <div id="ai-messages" class="messages-area"></div>
            <form id="ai-form" class="chat-form">
                <textarea id="ai-messageBox" class="chat-textarea" placeholder="輸入你的問題..."></textarea>
                <button type="submit"><i class="fas fa-paper-plane"></i></button>
            </form>
        </div>
    </div>

    <template id="user-message-template">
    <div class="message" data-index="">
        <strong class="message-sender-name"></strong>

        <div class="reply-content" style="display: none;"></div>
        <div class="message-bundle">
            <div class="message-content">
                <p class="current_message"></p>
            </div>
            <div class="thumb-wrapper">
                <i class="thumb-icon fa fa-thumbs-up"></i>
                <span class="thumb-count">0</span>
            </div>
        </div>
    </div>
    </template>

    <template id="ai-message-template">
    <div class="ai-message">
        <p></p>
    </div>
    </template>

    <script src="{% static 'scripts.js' %}"></script>

</body>
</html>